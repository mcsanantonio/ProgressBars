function incrementBar(t){var e=t.value;update(e)}function update(t){var e=document.getElementById("barName"),a=e.selectedIndex;d3.select("svg").remove(),svg=d3.select("#graphic").append("svg").attr("width","100%").attr("height",height).attr("viewBox","0 0 "+Math.min(width,height)+" "+Math.min(width,height)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+margin.left+","+margin.top+")"),dataArray[a]=parseInt(dataArray[a])+parseInt(t),dataArray[a]<=0&&(dataArray[a]=0),updateBars(t)}function updateBars(t){var e=svg.selectAll(".bar").data(dataArray).enter().append("g");e.append("rect").attr("class",function(t){var e="bar";return t>=endpoint.limit&&(e="over"),e}).attr("x",function(t,e){return margin.left}).attr("y",function(t,e){return height/dataArray.length*e}).attr("height",60).attr("width",function(t){return percent=t,0>=percent&&(t=0),x(t)}),e.append("text").attr("class",function(t){var e="text";return t>=endpoint.limit&&(e="over-text"),e}).attr("x",function(t){return a/2}).attr("y",function(t,e){return height/dataArray.length*e+35}).text(function(t){return 0>=t&&(t=0),t+"%"})}function generateControls(){var t=d3.select("#dropdown-container").append("select").attr("class","select").attr("name","barName").attr("id","barName");t.selectAll("option").data(endpoint.bars).enter().append("option").text(function(t,e){return"Progress Bar #"+(e+1)});d3.select("#btn-container").selectAll("input").data(endpoint.buttons).enter().append("input").attr("type","button").attr("class","button").attr("value",function(t){return t}).attr("onclick","incrementBar(this)")}var i=0,percent,endpoint={buttons:[47,32,-36,-6],bars:[39,83,40],limit:190},dataArray=endpoint.bars,element=d3.select("#graphic").node(),a=element.getBoundingClientRect().width;console.log(a);var margin={top:20,right:0,bottom:0,left:0},width=960,height=300,svg=d3.select("#graphic").append("svg").attr("width","100%").attr("height",height).attr("viewBox","0 0 "+Math.min(width,height)+" "+Math.min(width,height)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+margin.left+","+margin.top+")"),x=d3.scale.linear().range([0,width]).domain([0,d3.max(dataArray,function(t){return endpoint.limit})]),y=d3.scale.linear().range([0,height]).domain(dataArray.map(function(t){return t}));updateBars(0),generateControls();